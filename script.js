(function(){if($("html").data().achelper||system.type!="video"){return}else{$("html").data().achelper=true}if(!config.plugins||!config.plugins.acHelper){config.plugins={acHelper:{autoSwap:true,autoHide:false,html5:false}};$.save("config")}else if(typeof config.plugins.acHelper.autoSwap!="boolean"){config.plugins.acHelper.autoSwap=true}part=$("#area-part-view .btn.active");if(config.plugins.acHelper.html5){system.func.checkFlash=function(){return false}}var funcAutoSwap=function(){if(config.plugins.acHelper.autoSwap){if($.inArray($("#area-part-view .btn.active").data().from,["youku2","qq2","letv2","sohu","pptv","iqiyi"])!==-1){var timer=setInterval(function(){if($("object#ACFlashPlayer-re").length){$("#area-part-view .btn.active").data().from="manaka";system.func.setPlayer();clearInterval(timer)}else if($("#area-redirect").length){$("#area-player .inner").html('<iframe id="ACFlashPlayer-re"></iframe>');if(system.func.readyPlayer){$("#area-part-view .btn.active").data().from="manaka";system.func.readyPlayer()}clearInterval(timer)}},500)}else if(config.plugins.acHelper.html5){system.func.setPlayer()}}};if($("#area-part-view .btn.active").length){funcAutoSwap()}else{var partTimer=setInterval(function(){if($("#area-part-view .btn.active").length){funcAutoSwap();clearInterval(partTimer)}},500)}var style=document.createElement("style");$(style).html('#area-toolbar-view{z-index:3 !important;}#area-toolbar-view:hover .tooltip{display:inline-block}#area-toolbar-view .icon{transition:color .5s}#area-toolbar-view .tooltip{display:none;background-color:#fff;font-family:"Microsoft Jhenghei",Helvetica,Arial,Verdana,sans-serif;color:#666;text-shadow:0 0 2px rgba(0,0,0,0.1);font-size:18px;padding:0 10px;border-left:1px solid #ddd;height:34px;border-right:1px solid #ddd;position:absolute;left:395px;}#area-toolbar-view .tooltip .icon{color:#3a9bd9}#area-toolbar-view .tooltip:hover + .config-box{display:block}#area-toolbar-view .tooltip:hover .icon{color:#95be3e}#area-toolbar-view .config-box{display:none;position:absolute;background:rgba(255,255,255,0.75);box-shadow:2px 4px 4px rgba(0,0,0,0.1);border:1px solid #ddd;top:34px;left:395px;width:300px;height:180px;}#area-toolbar-view .config-box p,#area-toolbar-view .config-box a,#area-toolbar-view .config-box span,#area-toolbar-view .config-box label{font-family:"Microsoft Jhenghei",Helvetica,Arial,Verdana,sans-serif}#area-toolbar-view .config-box:hover{display:block}#area-toolbar-view .config-box .inner{padding:8px;}#area-toolbar-view .config-box .inner .area-btn{margin:4px 0 12px 0;text-align:center;}#area-toolbar-view .config-box .inner .area-btn .btn{float:none;font-size:18px;height:34px;line-height:32px;padding:0 12px;}#area-toolbar-view .config-box .inner .area-btn .btn:hover .icon{color:#95be3e}#area-toolbar-view .config-box .inner .area-btn .btn .icon{color:#3a9bd9}#area-toolbar-view .config-box .inner label{font-size:16px;color:#899619;display:inline-block;line-height:1.2;margin:0 30px 0 10px}#area-toolbar-view .config-box .inner input[type="checkbox"]{vertical-align:text-bottom;width:20px;box-shadow:none;height:20px;cursor:pointer}');$("head").append(style);$("#area-toolbar-view").append('<a class="tooltip"><i class="icon icon-star"></i>acfun助手</a>').append('<div class="config-box">'+'<div class="inner">'+'<div class="area-btn"><a class="btn" id="swap-player"><i class="icon icon-heart"></i>点击手动替换播放器</a></div>'+'<div><label for="auto-swap">自动替换播放器</label><input id="auto-swap" type="checkbox" checked="checked"></div>'+'<div><label for="auto-hide">自动隐藏插件</label><input id="auto-hide" type="checkbox"></div>'+'<div><label for="use-html5">使用HTML5播放器</label><input id="use-html5" type="checkbox"></div>'+"</div></div>"+"</div>");if(!config.plugins.acHelper.autoHide){$("#area-toolbar-view").find(".tooltip").css({display:"inline-block"})}else{$("#auto-hide")[0].checked=true}if(!config.plugins.acHelper.autoSwap){$("#auto-swap")[0].checked=false}if(config.plugins.acHelper.html5){$("#use-html5")[0].checked=true}$("#swap-player").on("click",function(){from=$("#area-part-view .btn.active").data().from;if($.inArray(from,["youku2","qq2","letv2","sohu","pptv","iqiyi"])!==-1||$("object#ACFlashPlayer-re").length){$("#area-part-view .btn.active").data().from="manaka";if(system.func.readyPlayer){$("#area-player .inner").html('<iframe id="ACFlashPlayer-re"></iframe>');system.func.readyPlayer()}else{system.func.setPlayer()}}else{$(this).info("info::播放器已替换或替换失败。")}});$("#auto-swap").on("change",function(){if(this.checked){config.plugins.acHelper.autoSwap=true}else{config.plugins.acHelper.autoSwap=false}$.save("config")});$("#auto-hide").on("change",function(){if(this.checked){config.plugins.acHelper.autoHide=true}else{config.plugins.acHelper.autoHide=false}$.save("config")});$("#use-html5").on("change",function(){if(this.checked){config.plugins.acHelper.html5=true;system.func.checkFlash=function(){return false}}else{config.plugins.acHelper.html5=false;system.func.checkFlash=function(){return true}}$.save("config")})})();
